# 为什么需要开源存储

在之前，我们并不需要开源存储软件来构建相应的解决方案。当时 闭源的商用存储软件就可以满足用户的需求，只是价格比较昂贵。&#x20;

## 基于商用/闭源存储软件的时代

在Linux没有流行的时候，并没有太多操作系统可供选择。例如，微软的Windows、Sun的Solaris、运行在IBM大型机上的操作系统，以及流 行的UNIX等。基于这样的现实，存储系统大多构建在闭源的操作系统 上，自然没有太大的动力去推出开源存储软件。&#x20;

另外一个客观的事实是，存储软件的第一个版本基本都是闭源的。 而开源存储软件出现的原因是某些公司觉得应该把这样的技术公之于众或回馈社会，或者迫于其他类似开源软件的先声夺人。另外形成开源社 区也需要时间，10～20年之前，没有太多的开源存储项目，自然谈不上 使用开源存储软件来进行实际的部署。另外，还有以下几点原因也在客 观上限制了存储系统的发展。

1. **存储设备的发展**&#x20;

开源存储软件之前未得到发展的一个主要原因是受限于存储设备。 从存储设备的发展历史来看，每GB存储空间的成本一直在降低。直到 2000年左右，存储设备的发展仍不太迅速。从用户角度来看，当时的存 储设备容量太小、价格太贵、速度太慢，这在很大程度上制约了存储应 用的发展。&#x20;

2. **存储的整体需求不高**&#x20;

存储设备的发展制约了存储的需求，反过来，没有需求，存储设备 的发展速度也会变慢，这两者既是相互制约，也是相互促进的。

例如， 在2000年左右，存储需求不太明显，互联网行业虚假繁荣，直至泡沫破 裂，当时崛起的一些IT公司从市值很高的神坛跌落。例如，EMC（昌安 信）公司的市值曾达到2000多亿美金，但泡沫破裂后，其股票一路下跌，直到2015年被戴尔公司以670亿美金收购，也没有恢复元气。以EMC 为例是为了说明在互联网发展初期，其实存储公司的发展前景并不是特 别明朗的，尤其在市场整体股价下跌的时候，因为没有大量数据的存储 需求，所以可能跌得更厉害。 在那个时代，存储数据主要以结构化数据为主，如数据库、有索引 的文件、档案等。对致力于企业级存储的EMC来讲，虽然有很多高端的 金融客户等，但是这些客户对存储设备的需求量还是非常有限的。在互 联网发展初期，一方面，还没有太多的结构化数据，主要是用于搜索的 非结构化数据，如图片等。那些占据大量存储的视频、音频文件在当时 并不流行，所以对于存储的需求还是以企业为主的，以支持个人用户为 导向的存储系统并没有太大的市场，当然这也与当时网络不发达有关。 另一方面，当时各种产生大量存储需求的设备，如个人使用的智能相 机，还没有流行起来。

3. **开发存储产品的高门槛**

评估一个存储系统，一般有以下指标。

* <mark style="color:purple;">性能指标</mark>：业界有相关的存储性能委员会（Storage Performance Council ， SPC ） 发布相应的测试规范（ Benchmark ） 和测试工作集 （Workload）。典型的测试工作集包括SPC-1（主要评估存储系统面向事 务性业务的性能）、SPC-2（评估不同业务类型，大规模连续数据访问的 存储系统的性能，如大量文件并发性访问、视频点播业务等）、SPC- 3（提供应用层的模拟，如存储管理、内容管理、信息生命周期等性 能）。&#x20;
* <mark style="color:purple;">可靠性标准</mark>：如数据的可用性、完整性、安全性，在不同领域有 不同的标准。
* <mark style="color:purple;">功能性标准</mark>：如是否符合业界定义的规范，不同的国家有不同的 标准。想要获得更详细的信息，可以参考主流供应商提供的存储产品进 行相关的对照，如EMC、华为、NetApp提供的产品。
* <mark style="color:purple;">能耗标准</mark>：主要用于评估存储系统在不同负载情况下的功耗，显 然在相同负载的情况下，功耗消耗越低越有竞争力。因为这个标准涉及 运维的代价，因此，数据中心的运行者对这个指标比较关心。

这些存储系统的评估标准是在不断演化的。总的来说，想要打造一 款具有竞争力的存储产品并不是一件容易的事情。作为一个合格的存储提供厂商，即使是一个创业小公司，也是竭尽全力地想要通过一些标准 组织委员会提供的性能、可靠性等不同的测试的，从而在交付用户之 前，能够及早发现各种问题，并加以修正。如果想做到盈利，公司提供 的相应的产品就要有竞争力，如产品性能、性价比、存储安全性等方面 的优势，只有这样才能在竞争激烈的市场中占据一席之地。由此可知， 开发存储产品的门槛很高。



## 风向的转变

近几年，随着CPU、内存等硬件技术的快速发展，以及互联网的高 速发展和数据的爆炸式增长等，传统的商业存储软件已经难以满足人们 的应用需求了。

Google 开发了Google 文件系统（ Google File System，GFS），以满足搜索引擎的后端存储（Backend Storage）需求；

&#x20;Amazon 推出了EBS （ Elastic Block Store ） ， 以满足提供EC2 （ Elastic Computing Cloud）服务的虚拟机的持久化存储需求。

为了满足人们对开 源分布式存储的需求，学术界诞生的Ceph在社区管理的缓慢推动下，形 成了一套可实际部署的开源存储软件，被广泛部署在各个领域。 从商用/闭源存储系统到开源的存储系统，这个变化是令人欣喜的， 仔细分析其中的原因，主要有以下几点。

1. **商用存储软件功能的局限性**&#x20;

在数据爆发式增长的时候，一些存储系统，如单机，已经不能满足 存储需求了。当数据的容量从TB到PB甚至继续增长的时候，这些商用/闭 源存储系统由于可扩展性的缺失，已经不能适用于某些数据持续增长的 应用场景。我们知道，扩容无非是两种形式，即Scale-up（针对单机）和 Scale-out（针对分布式存储）。因此，扩容成了一件棘手的事情。在开始 的时候，单机扩容还可以解决问题，但是其容量终究是有上限的。

2. **商用存储系统的价格昂贵**

有些企业销售的高端存储系统价格非常昂贵，一台机器可能卖到几 十万美元甚至几百万美元。这些系统虽然在性能评估等各个方面非常有 优势，但是昂贵的价格让很多人望而却步，只有一些大公司，如银行、 证券公司，才可能配备这样的系统。在市场和行业没有对比的情况下， 售卖这些存储系统带来的盈利是非常可观的。

另外，企业在给客户售卖闭源存储系统的时候，也会搭配相应的售 后服务。从系统稳定性和良好的售后服务来看，这些存储系统可以说是 无可挑剔的，但生产成本始终是不可忽略的一个因素。在开源存储不断 崛起的时代，这些存储系统慢慢转变成云存储服务，这对这些昂贵的存 储系统的销售将是一个挑战。虽然某些特殊领域对存储系统还有一些需 求，但是不可否认的是，这个需求量在不断下滑，市场在进一步萎缩。

3. **开源生态圈的蓬勃发展**

开源软件越来越流行，生态圈发展越来越好，主要是因为互联网企 业在广泛使用开源软件，包括开源存储软件，并且向社区提交补丁，以 改善代码质量，这样就形成了一个良性循环。互联网企业对于开源软件 的使用或验证（所谓的Dogfood测试）极大地提高了开源软件的影响力， 让用户意识到由社区维护的开源软件一样可以作为商用软件来使用。

4. **互联网企业的身体力行**

很多互联网企业最初在运营的时候并没有把自己定位为高科技公 司。Amazon最初是一家电子商务公司，它很大一部分收入来自书籍的售 卖，后来慢慢转型为一家提供云计算、云存储等服务的高科技公司，虽然电子商务仍是其业务的一部分，但是也许已经不再是支持其高速发 展、股价一路上涨的重要部分了。&#x20;

存储方面，Amazon一开始搭载了存储巨头，如戴尔、EMC、IBM等 公司的存储产品或软件，目前可能依然在使用，但已经不是其后端存储 业务的核心了。为了适应自身发展的需求，Amazon在存储方面做了自己 的开发工作， 例如， Amazon 的基础架构即服务（ Infrastructure as a Service，IaaS）最早采用了Xen虚拟化的架构，为虚拟机的后端存储开发 了EBS和S3（Simple Storage Store）；针对电子商务业务，Amazon开发了 基于键值的NoSQL数据库——Dynamo，满足了自身业务的需求。

